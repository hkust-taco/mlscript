:global
:bbml



let f = (x => (x : [A] -> A -> A)) in f
//│ Type: (⊤ -> ⊥) ->{⊥} forall α1_2: (α1_2) ->{⊥} α1_2

let f = ((x => x) : [A] -> A -> A) in f
//│ Type: forall α2_2: (α2_2) ->{⊥} α2_2

let foo = f => (x => f(x(x)) : [A] -> A -> A) in foo
//│ Type: (α8_1 -> (⊤ -> ⊥)) ->{⊥} (α4_1 -> α8_1) ->{⊥} forall α5_2: (α5_2) ->{⊥} α5_2
//│ Where:
//│   α4_1 <: α4_1 -> α8_1

f => (let g = x => x(x) in f(g(g))) : [A] -> A -> A
//│ Type: (⊥ -> (⊤ -> ⊥)) ->{⊥} forall α16_2: (α16_2) ->{⊥} α16_2

:e
f => (let g = x => f(x(x)) in g) : [A] -> A -> A
//│ ╔══[ERROR] Type error in reference with expected type (<α>26_2) ->{⊥} <α>26_2
//│ ║  l.21: 	f => (let g = x => f(x(x)) in g) : [A] -> A -> A
//│ ║        	                              ^
//│ ╟── because: cannot constrain  α27_2 ->{α30_2 ∨ α28_2} α31_2  <:  <α>26_2 -> <α>26_2
//│ ╟── because: cannot constrain  <α>26_2  <:  D( α27_2 )
//│ ╟── because: cannot constrain  <α>26_2  <:  α27_2
//│ ╙── because: cannot constrain  <α>26_2  <:  ¬(~{α27_2 ->{α28_2} α29_2})
//│ Type: (⊥ -> ⊥) ->{⊥} forall α26_2: (α26_2) ->{⊥} α26_2

f => (x => f(x(x)) : [A] -> A -> A)
//│ Type: (α40_1 -> (⊤ -> ⊥)) ->{⊥} (α36_1 -> α40_1) ->{⊥} forall α37_2: (α37_2) ->{⊥} α37_2
//│ Where:
//│   α36_1 <: α36_1 -> α40_1

let foo = f => (f(x => x(x)) : [A] -> A -> A) in foo
//│ Type: (((α54_1 ->{α57_1} α56_1) ->{α57_1} α56_1) -> (⊤ -> ⊥)) ->{⊥} forall α48_2: (α48_2) ->{⊥} α48_2
//│ Where:
//│   α54_1 <: α54_1 ->{α57_1} α56_1

:todo
let foo(f) = (f(x => x(x)) : [A] -> A -> A) in foo
//│ ╔══[ERROR] Variable not found: f
//│ ║  l.42: 	let foo(f) = (f(x => x(x)) : [A] -> A -> A) in foo
//│ ╙──      	              ^
//│ Type: forall α62_2: (α62_2) ->{⊥} α62_2

:todo
fun foo(f) = (f(x => x(x)) : [A] -> A -> A)
//│ ╔══[ERROR] General type is not allowed here.
//│ ║  l.49: 	fun foo(f) = (f(x => x(x)) : [A] -> A -> A)
//│ ╙──      	        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ Type: ⊤


f => (let g = x => x(x) in let tmp = g(g) in f(g)) : [A] -> A -> A
//│ Type: ((((α91_1 ∨ (α91_1 ->{α94_1} α93_1)) -> α93_1) ->{α94_1} α93_1) -> (⊤ -> ⊥)) ->{⊥} forall α85_2: (α85_2) ->{⊥} α85_2
//│ Where:
//│   α91_1 <: (α91_1 ∨ (α91_1 ->{α94_1} α93_1)) -> α93_1


