:AllowParseErrors


acc + 1
//│ |acc| |+| |1|
//│ Parsed: {+ (acc,) (1,)}

acc
+ 1
//│ |acc|↵|+| |1|
//│ ╔══[PARSE ERROR] Unexpected operator in expression position
//│ ║  l.9: 	+ 1
//│ ╙──     	^
//│ Parsed: {acc; 1}

acc
  + 1
//│ |acc|→|+| |1|←|
//│ Parsed: {+ acc 1}

acc +
  1
//│ |acc| |+|→|1|←|
//│ Parsed: {+ (acc,) ({1},)}

acc
  +
  1
//│ |acc|→|+|↵|1|←|
//│ ╔══[PARSE ERROR] Unexpected newline in expression position
//│ ║  l.27: 	  +
//│ ║        	   ^
//│ ║  l.28: 	  1
//│ ╙──      	^^
//│ Parsed: {+ acc 1}

acc
  +
    1
//│ |acc|→|+|→|1|←|←|
//│ Parsed: {+ acc {1}}

acc
  + 1
  * 3
//│ |acc|→|+| |1|↵|*| |3|←|
//│ Parsed: {* (+ acc 1) 3}

acc
  + 1
  + 2
  * 3
//│ |acc|→|+| |1|↵|+| |2|↵|*| |3|←|
//│ Parsed: {* (+ (+ acc 1) 2) 3}

acc + 1 + 2 * 3
//│ |acc| |+| |1| |+| |2| |*| |3|
//│ Parsed: {+ (+ (acc,) (1,),) (* (2,) (3,),)}

acc+1+2*3
//│ |acc|+|1|+|2|*|3|
//│ Parsed: {+ (+ (acc,) (1,),) (* (2,) (3,),)}

acc +
  foo bar
  baz
//│ |acc| |+|→|foo| |bar|↵|baz|←|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.65: 	  foo bar
//│ ╙──      	  ^^^^^^^
//│ Parsed: {+ (acc,) ({foo (bar,); baz},)}

a+
  b
  c
//│ /!!!\ Uncaught error: java.lang.ArrayIndexOutOfBoundsException: Index 10 out of bounds for length 10
//│ 	at: mlscript.NewLexer.isQuasiquoteKeyword$1(NewLexer.scala:81)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:91)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:140)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:150)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:130)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:157)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:150)

a+
  b
c
//│ /!!!\ Uncaught error: java.lang.ArrayIndexOutOfBoundsException: Index 8 out of bounds for length 8
//│ 	at: mlscript.NewLexer.isQuasiquoteKeyword$1(NewLexer.scala:81)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:91)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:140)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:150)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:130)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:157)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:150)

a
  +b
c
//│ /!!!\ Uncaught error: java.lang.ArrayIndexOutOfBoundsException: Index 8 out of bounds for length 8
//│ 	at: mlscript.NewLexer.isQuasiquoteKeyword$1(NewLexer.scala:81)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:91)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:140)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:150)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:157)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:130)
//│ 	at: mlscript.NewLexer.go$1(NewLexer.scala:82)
//│ 	at: mlscript.NewLexer.lex(NewLexer.scala:150)


a + b
  * 2
//│ |a| |+| |b|→|*| |2|←|
//│ Parsed: {+ (a,) (* b 2,)}

a(b)
  * 2
//│ |a|(|b|)|→|*| |2|←|
//│ Parsed: {* (a (b,)) 2}

a of b
  * 2
//│ |a| |#of| |b|→|*| |2|←|
//│ Parsed: {a (* b 2,)}

a then b
  * 2
//│ |a| |#then| |b|→|*| |2|←|
//│ ╔══[PARSE ERROR] Unexpected 'then'/'else' clause
//│ ║  l.134: 	a then b
//│ ║         	^^^^^^^^
//│ ║  l.135: 	  * 2
//│ ╙──       	^^^^^
//│ Parsed: {undefined}

a + b
  * 2
  + 1
  * 3
//│ |a| |+| |b|→|*| |2|↵|+| |1|↵|*| |3|←|
//│ Parsed: {+ (a,) (* (+ (* b 2) 1) 3,)}

a + b
  * 2
    + 1
//│ |a| |+| |b|→|*| |2|→|+| |1|←|←|
//│ Parsed: {+ (a,) (* b (+ 2 1),)}

a + b
    * 2
  - 1
//│ |a| |+| |b|→|*| |2|←|→|-| |1|←|
//│ Parsed: {- (+ (a,) (* b 2,)) 1}

a + b
  * 2
    + 1
  * 3
//│ |a| |+| |b|→|*| |2|→|+| |1|←|↵|*| |3|←|
//│ Parsed: {+ (a,) (* (* b (+ 2 1)) 3,)}

a +
  b
    * 2
  + 1
  * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|↵|*| |3|←|
//│ ╔══[PARSE ERROR] Unexpected operator in expression position
//│ ║  l.173: 	  + 1
//│ ╙──       	  ^
//│ ╔══[PARSE ERROR] Unexpected operator in expression position
//│ ║  l.174: 	  * 3
//│ ╙──       	  ^
//│ Parsed: {+ (a,) ({* b 2; 1; 3},)}

a +
    b
      * 2
    + 1
  * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|←|→|*| |3|←|
//│ ╔══[PARSE ERROR] Unexpected operator in expression position
//│ ║  l.187: 	    + 1
//│ ╙──       	    ^
//│ Parsed: {* (+ (a,) ({* b 2; 1},)) 3}

a +
  b
    * 2
  +
    1
      * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+|→|1|→|*| |3|←|←|←|
//│ ╔══[PARSE ERROR] Unexpected operator in expression position
//│ ║  l.198: 	  +
//│ ╙──       	  ^
//│ Parsed: {+ (a,) ({* b 2; {* 1 3}},)}

a +
  b
    * 2
    +
      1
        * 3
//│ |a| |+|→|b|→|*| |2|↵|+|→|1|→|*| |3|←|←|←|←|
//│ Parsed: {+ (a,) ({+ (* b 2) {* 1 3}},)}

a +
  b
    * 2
  + 1
    * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|→|*| |3|←|←|
//│ ╔══[PARSE ERROR] Unexpected operator in expression position
//│ ║  l.219: 	  + 1
//│ ╙──       	  ^
//│ Parsed: {+ (a,) ({* b 2; * 1 3},)}

a +
  b
    * 2
    + 1
      * 3
//│ |a| |+|→|b|→|*| |2|↵|+| |1|→|*| |3|←|←|←|
//│ Parsed: {+ (a,) ({+ (* b 2) (* 1 3)},)}


