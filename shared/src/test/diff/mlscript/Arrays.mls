:ShowRelativeLineNums
:NoJS

class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ╔══[ERROR] Type 'Array' is already defined.
//│ ║  l.+1: 	class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ╙──      	      ^^^^^

dummy = Array {
    size = 0;
    set = fun (i, a) -> ();
    get = fun i -> error
  }
//│ dummy: Array['A] with {get: anything -> nothing, set: (anything, anything,) -> (), size: 0}

dummy: Array[int]
//│ res: Array[int] with {get: int -> int, set: (int, int,) -> ()}

def ty1A: Array[int]
def ty1B: Array[0 | 1]
//│ ty1A: Array[int] with {get: int -> int, set: (int, int,) -> ()}
//│ ty1B: Array[0 | 1] with {get: int -> (0 | 1), set: (int, 0 | 1,) -> ()}


def ty2A: Array['a]
//│ ty2A: Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()}

:stats
ty2A = ty2A
//│ Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()}
//│   <:  ty2A:
//│ Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()}
//│ constrain calls  : 21
//│ annoying  calls  : 20
//│ subtyping calls  : 78

def ty2B: Array[Array['a]]
//│ ty2B: Array[array & {Array#A = 'a, get: int -> 'a, set: (int, 'a,) -> (), size: int}] with {get: int -> (Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()}), set: (int, Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()},) -> ()}

:stats
ty2B = ty2A
//│ Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()}
//│   <:  ty2B:
//│ Array[array & {Array#A = 'a, get: int -> 'a, set: (int, 'a,) -> (), size: int}] with {get: int -> (Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()}), set: (int, Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()},) -> ()}
//│ constrain calls  : 21
//│ annoying  calls  : 20
//│ subtyping calls  : 145


def ty3A: Array['a] as 'a
//│ ty3A: 'a | (Array[(Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c .. 'b] with {get: int -> 'b, set: (int, (Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c,) -> ()}) as 'b

:stats
ty3A = ty3A
//│ 'a | (Array[(Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c .. 'b] with {get: int -> 'b, set: (int, (Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c,) -> ()}) as 'b
//│   <:  ty3A:
//│ 'a | (Array[(Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c .. 'b] with {get: int -> 'b, set: (int, (Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c,) -> ()}) as 'b
//│ constrain calls  : 65
//│ annoying  calls  : 46
//│ subtyping calls  : 503

def ty3B: Array[Array['a]] as 'a
//│ ty3B: 'a | (Array[(Array['d .. 'e] with {get: int -> ((Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> 'c, set: (int, Array['f .. 'b] with {get: int -> 'b, set: (int, 'f,) -> ()},) -> ()}) & 'a as 'f), set: (int, 'b,) -> ()}) as 'c .. Array[?] with {get: int -> 'b, set: 'h | ((int, (Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> ((Array['d .. 'e] with {get: int -> 'f, set: (int, 'b,) -> ()}) as 'c), set: (int, Array['f .. 'b] with {get: int -> 'b, set: 'i},) -> ()}) & 'a as 'f,) -> () as 'i)}] with {get: int -> (Array[?] with {get: int -> 'b, set: 'h | ((int, (Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> ((Array['d .. 'e] with {get: int -> 'f, set: (int, 'b,) -> ()}) as 'c), set: (int, Array['f .. 'b] with {get: int -> 'b, set: 'i},) -> ()}) & 'a as 'f,) -> () as 'i)}), set: (int, (Array['d .. 'e] with {get: int -> ((Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> 'c, set: (int, Array['f .. 'b] with {get: int -> 'b, set: (int, 'f,) -> () as 'i},) -> ()}) & 'a as 'f), set: (int, 'b,) -> ()}) as 'c,) -> ()}) as 'b

:stats
ty3B = ty3A
//│ 'a | (Array[(Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c .. 'b] with {get: int -> 'b, set: (int, (Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c,) -> ()}) as 'b
//│   <:  ty3B:
//│ 'a | (Array[(Array['d .. 'e] with {get: int -> ((Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> 'c, set: (int, Array['f .. 'b] with {get: int -> 'b, set: (int, 'f,) -> ()},) -> ()}) & 'a as 'f), set: (int, 'b,) -> ()}) as 'c .. Array[?] with {get: int -> 'b, set: 'h | ((int, (Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> ((Array['d .. 'e] with {get: int -> 'f, set: (int, 'b,) -> ()}) as 'c), set: (int, Array['f .. 'b] with {get: int -> 'b, set: 'i},) -> ()}) & 'a as 'f,) -> () as 'i)}] with {get: int -> (Array[?] with {get: int -> 'b, set: 'h | ((int, (Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> ((Array['d .. 'e] with {get: int -> 'f, set: (int, 'b,) -> ()}) as 'c), set: (int, Array['f .. 'b] with {get: int -> 'b, set: 'i},) -> ()}) & 'a as 'f,) -> () as 'i)}), set: (int, (Array['d .. 'e] with {get: int -> ((Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> 'c, set: (int, Array['f .. 'b] with {get: int -> 'b, set: (int, 'f,) -> () as 'i},) -> ()}) & 'a as 'f), set: (int, 'b,) -> ()}) as 'c,) -> ()}) as 'b
//│ constrain calls  : 154
//│ annoying  calls  : 129
//│ subtyping calls  : 1941

:stats
ty3A = ty3B
//│ 'a | (Array[(Array['d .. 'e] with {get: int -> ((Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> 'c, set: (int, Array['f .. 'b] with {get: int -> 'b, set: (int, 'f,) -> ()},) -> ()}) & 'a as 'f), set: (int, 'b,) -> ()}) as 'c .. Array[?] with {get: int -> 'b, set: 'h | ((int, (Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> ((Array['d .. 'e] with {get: int -> 'f, set: (int, 'b,) -> ()}) as 'c), set: (int, Array['f .. 'b] with {get: int -> 'b, set: 'i},) -> ()}) & 'a as 'f,) -> () as 'i)}] with {get: int -> (Array[?] with {get: int -> 'b, set: 'h | ((int, (Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> ((Array['d .. 'e] with {get: int -> 'f, set: (int, 'b,) -> ()}) as 'c), set: (int, Array['f .. 'b] with {get: int -> 'b, set: 'i},) -> ()}) & 'a as 'f,) -> () as 'i)}), set: (int, (Array['d .. 'e] with {get: int -> ((Array[Array['f .. 'b] with {get: int -> 'd, set: (int, 'e,) -> ()} .. 'g] with {get: int -> 'c, set: (int, Array['f .. 'b] with {get: int -> 'b, set: (int, 'f,) -> () as 'i},) -> ()}) & 'a as 'f), set: (int, 'b,) -> ()}) as 'c,) -> ()}) as 'b
//│   <:  ty3A:
//│ 'a | (Array[(Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c .. 'b] with {get: int -> 'b, set: (int, (Array['d .. 'e] with {get: int -> 'c, set: (int, 'b,) -> ()}) & 'a as 'c,) -> ()}) as 'b
//│ constrain calls  : 154
//│ annoying  calls  : 129
//│ subtyping calls  : 1951

def ty4B: Array[Array[Array['a]]] as 'a
//│ ty4B: 'a | (Array[(Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> (Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. 'd | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. 'd | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})] with {get: int -> ('d | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})), set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}), set: (int, (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k,) -> ()}) as 'c .. Array['l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k), set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm) .. (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k] with {get: 'n | (int -> ((Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k) as 'o), set: (int, 'l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm),) -> ()}] with {get: int -> (Array['l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm) .. (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k] with {get: 'n | (int -> ((Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k) as 'o), set: (int, 'l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm),) -> ()}), set: (int, (Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k,) -> ()}) as 'c,) -> ()}) as 'b

:stats
ty4B = ty4B
//│ 'a | (Array[(Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> (Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. 'd | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. 'd | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})] with {get: int -> ('d | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})), set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}), set: (int, (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k,) -> ()}) as 'c .. Array['l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k), set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm) .. (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k] with {get: 'n | (int -> ((Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k) as 'o), set: (int, 'l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm),) -> ()}] with {get: int -> (Array['l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm) .. (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k] with {get: 'n | (int -> ((Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k) as 'o), set: (int, 'l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm),) -> ()}), set: (int, (Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k,) -> ()}) as 'c,) -> ()}) as 'b
//│   <:  ty4B:
//│ 'a | (Array[(Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> (Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. 'd | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. 'd | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})] with {get: int -> ('d | (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()})), set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}), set: (int, (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k,) -> ()}) as 'c .. Array['l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k), set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm) .. (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k] with {get: 'n | (int -> ((Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k) as 'o), set: (int, 'l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm),) -> ()}] with {get: int -> (Array['l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm) .. (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k] with {get: 'n | (int -> ((Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> 'h as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k) as 'o), set: (int, 'l & ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> ((Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> 'm, set: (int, (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k,) -> ()}) as 'c), set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm),) -> ()}), set: (int, (Array['d .. Array[?] with {get: 'e, set: (int, 'f,) -> ()}] with {get: int -> ((Array[?] with {get: 'e & (int -> ((Array[Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()} .. (Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k] with {get: int -> ((Array['h .. 'b] with {get: int -> 'b, set: (int, 'h,) -> ()}) as 'k) as 'o, set: (int, Array['f .. 'i] with {get: 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h) as 'g), set: (int, 'b,) -> ()}) as 'm), set: (int, (Array[(Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h .. 'b] with {get: int -> 'b, set: (int, (Array[Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'd, set: (int, Array['f .. 'i] with {get: int -> 'i, set: (int, 'f,) -> ()},) -> ()} .. 'j] with {get: int -> 'c, set: (int, Array[Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()} .. 'k] with {get: int -> 'k as 'o, set: (int, Array['f .. 'i] with {get: int -> 'h as 'g, set: (int, 'b,) -> ()},) -> ()},) -> ()}) & 'a as 'h,) -> ()}) as 'k,) -> ()}) as 'c,) -> ()}) as 'b
//│ constrain calls  : 134
//│ annoying  calls  : 138
//│ subtyping calls  : 27065



//===//===//===// ERRORS //===//===//===//


:e
:stats
ty1A = ty1B
//│ Array[0 | 1] with {get: int -> (0 | 1), set: (int, 0 | 1,) -> ()}
//│   <:  ty1A:
//│ Array[int] with {get: int -> int, set: (int, int,) -> ()}
//│ ╔══[ERROR] Type mismatch in def definition:
//│ ║  l.+1: 	ty1A = ty1B
//│ ║        	^^^^^^^^^^^
//│ ╟── expression of type `int` does not match type `0 | 1`
//│ ║  l.19: 	def ty1A: Array[int]
//│ ║        	                ^^^
//│ ╟── Note: constraint arises from tuple type:
//│ ║  l.4: 	class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ╙──     	                                   ^^^^^^
//│ constrain calls  : 25
//│ annoying  calls  : 29
//│ subtyping calls  : 98

:e
:stats
ty1B = ty1A
//│ Array[int] with {get: int -> int, set: (int, int,) -> ()}
//│   <:  ty1B:
//│ Array[0 | 1] with {get: int -> (0 | 1), set: (int, 0 | 1,) -> ()}
//│ ╔══[ERROR] Type mismatch in def definition:
//│ ║  l.+1: 	ty1B = ty1A
//│ ║        	^^^^^^^^^^^
//│ ╟── expression of type `int` does not match type `0 | 1`
//│ ║  l.19: 	def ty1A: Array[int]
//│ ║        	                ^^^
//│ ╟── but it flows into reference of type `Array[int]`
//│ ║  l.+1: 	ty1B = ty1A
//│ ║        	       ^^^^
//│ ╟── which does not match type `Array[0 | 1]`
//│ ╟── Note: constraint arises from function type:
//│ ║  l.4: 	class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ║       	                                                       ^^^^^^^^
//│ ╟── from applied type reference:
//│ ║  l.20: 	def ty1B: Array[0 | 1]
//│ ╙──      	          ^^^^^^^^^^^^
//│ constrain calls  : 25
//│ annoying  calls  : 29
//│ subtyping calls  : 103


:e
:stats
ty2A = ty2B
//│ Array[array & {Array#A = 'a, get: int -> 'a, set: (int, 'a,) -> (), size: int}] with {get: int -> (Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()}), set: (int, Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()},) -> ()}
//│   <:  ty2A:
//│ Array['a] with {get: int -> 'a, set: (int, 'a,) -> ()}
//│ ╔══[ERROR] Type mismatch in def definition:
//│ ║  l.+1: 	ty2A = ty2B
//│ ║        	^^^^^^^^^^^
//│ ╟── expression of type `'a` does not match type `Array[?]`
//│ ║  l.25: 	def ty2A: Array['a]
//│ ║        	                ^^
//│ ╟── Note: constraint arises from applied type reference:
//│ ║  l.37: 	def ty2B: Array[Array['a]]
//│ ║        	                ^^^^^^^^^
//│ ╟── from tuple type:
//│ ║  l.4: 	class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ╙──     	                                   ^^^^^^
//│ ╔══[ERROR] Type mismatch in def definition:
//│ ║  l.+1: 	ty2A = ty2B
//│ ║        	^^^^^^^^^^^
//│ ╟── expression of type `'a` does not match type `{size: int, set: (int, ?a,) -> (), get: int -> ?a}`
//│ ║  l.25: 	def ty2A: Array['a]
//│ ║        	                ^^
//│ ╟── Note: constraint arises from record type:
//│ ║  l.4: 	class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ║       	                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── from applied type reference:
//│ ║  l.37: 	def ty2B: Array[Array['a]]
//│ ║        	                ^^^^^^^^^
//│ ╟── from tuple type:
//│ ║  l.4: 	class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ╙──     	                                   ^^^^^^
//│ ╔══[ERROR] Type mismatch in def definition:
//│ ║  l.+1: 	ty2A = ty2B
//│ ║        	^^^^^^^^^^^
//│ ╟── expression of type `'a` does not have field 'Array#A'
//│ ║  l.25: 	def ty2A: Array['a]
//│ ║        	                ^^
//│ ╟── Note: constraint arises from applied type reference:
//│ ║  l.37: 	def ty2B: Array[Array['a]]
//│ ║        	                ^^^^^^^^^
//│ ╟── from tuple type:
//│ ║  l.4: 	class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ╙──     	                                   ^^^^^^
//│ ╔══[ERROR] Type mismatch in def definition:
//│ ║  l.+1: 	ty2A = ty2B
//│ ║        	^^^^^^^^^^^
//│ ╟── expression of type `Array[?a]` does not match type `'a`
//│ ║  l.37: 	def ty2B: Array[Array['a]]
//│ ║        	                ^^^^^^^^^
//│ ╟── but it flows into reference of type `Array[Array[?a]]`
//│ ║  l.+1: 	ty2A = ty2B
//│ ║        	       ^^^^
//│ ╟── which does not match type `Array['a]`
//│ ╟── Note: constraint arises from type variable:
//│ ║  l.25: 	def ty2A: Array['a]
//│ ║        	                ^^
//│ ╟── from function type:
//│ ║  l.4: 	class Array[A]: { size: int; set: (int, A) -> (); get: int -> A }
//│ ╙──     	                                                       ^^^^^^^^
//│ constrain calls  : 28
//│ annoying  calls  : 28
//│ subtyping calls  : 153


