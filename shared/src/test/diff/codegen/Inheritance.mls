:js
trait X: { x: int }
class Y: X
  method MX = this.x
//│ Defined trait X
//│ Defined class Y
//│ Defined Y.MX: (Y & x) -> int
//│ // Prelude
//│ let res;
//│ const X = function () {
//│   const tag = Symbol();
//│   return ({
//│     implement: function implement(instance) {
//│       if (tag in instance) {
//│         return;
//│       }
//│       Object.defineProperty(instance, tag, { value: {} });
//│     },
//│     build: function build(instance) {
//│       if (typeof instance !== "object") {
//│         instance = Object.assign(instance, {});
//│       }
//│       this.implement(instance);
//│       return instance;
//│     },
//│     is: function is(x) {
//│       return typeof x === "object" && x !== null && tag in x;
//│     }
//│   });
//│ }();
//│ class Y {
//│   constructor(fields) {
//│     X.implement(this);
//│     this.x = fields.x;
//│   }
//│   get MX() {
//│     return this.x;
//│   }
//│ }
//│ // End of generated code

:js
(Y {x = 1}).x
//│ // Query 1
//│ res = new Y({ x: 1 }).x;
//│ // End of generated code
//│ res: 1
//│    = 1

:js
trait A: { a: int }
trait B: { b: int } & A
class C: B & { c: int }
//│ Defined trait A
//│ Defined trait B
//│ Defined class C
//│ // Prelude
//│ const A = function () {
//│   const tag = Symbol();
//│   return ({
//│     implement: function implement(instance) {
//│       if (tag in instance) {
//│         return;
//│       }
//│       Object.defineProperty(instance, tag, { value: {} });
//│     },
//│     build: function build(instance) {
//│       if (typeof instance !== "object") {
//│         instance = Object.assign(instance, {});
//│       }
//│       this.implement(instance);
//│       return instance;
//│     },
//│     is: function is(x) {
//│       return typeof x === "object" && x !== null && tag in x;
//│     }
//│   });
//│ }();
//│ const B = function () {
//│   const tag = Symbol();
//│   return ({
//│     implement: function implement(instance) {
//│       if (tag in instance) {
//│         return;
//│       }
//│       Object.defineProperty(instance, tag, { value: {} });
//│       A.implement(instance);
//│     },
//│     build: function build(instance) {
//│       if (typeof instance !== "object") {
//│         instance = Object.assign(instance, {});
//│       }
//│       this.implement(instance);
//│       return instance;
//│     },
//│     is: function is(x) {
//│       return typeof x === "object" && x !== null && tag in x;
//│     }
//│   });
//│ }();
//│ class C {
//│   constructor(fields) {
//│     B.implement(this);
//│     this.c = fields.c;
//│     this.b = fields.b;
//│     this.a = fields.a;
//│   }
//│ }
//│ // End of generated code

:js
class P: Q & { p: int }
trait Q: R & { q: int }
trait R: S & { r: int }
trait S: { s: int }
//│ Defined class P
//│ Defined trait Q
//│ Defined trait R
//│ Defined trait S
//│ // Prelude
//│ const Q = function () {
//│   const tag = Symbol();
//│   return ({
//│     implement: function implement(instance) {
//│       if (tag in instance) {
//│         return;
//│       }
//│       Object.defineProperty(instance, tag, { value: {} });
//│       R.implement(instance);
//│     },
//│     build: function build(instance) {
//│       if (typeof instance !== "object") {
//│         instance = Object.assign(instance, {});
//│       }
//│       this.implement(instance);
//│       return instance;
//│     },
//│     is: function is(x) {
//│       return typeof x === "object" && x !== null && tag in x;
//│     }
//│   });
//│ }();
//│ const R = function () {
//│   const tag = Symbol();
//│   return ({
//│     implement: function implement(instance) {
//│       if (tag in instance) {
//│         return;
//│       }
//│       Object.defineProperty(instance, tag, { value: {} });
//│       S.implement(instance);
//│     },
//│     build: function build(instance) {
//│       if (typeof instance !== "object") {
//│         instance = Object.assign(instance, {});
//│       }
//│       this.implement(instance);
//│       return instance;
//│     },
//│     is: function is(x) {
//│       return typeof x === "object" && x !== null && tag in x;
//│     }
//│   });
//│ }();
//│ const S = function () {
//│   const tag = Symbol();
//│   return ({
//│     implement: function implement(instance) {
//│       if (tag in instance) {
//│         return;
//│       }
//│       Object.defineProperty(instance, tag, { value: {} });
//│     },
//│     build: function build(instance) {
//│       if (typeof instance !== "object") {
//│         instance = Object.assign(instance, {});
//│       }
//│       this.implement(instance);
//│       return instance;
//│     },
//│     is: function is(x) {
//│       return typeof x === "object" && x !== null && tag in x;
//│     }
//│   });
//│ }();
//│ class P {
//│   constructor(fields) {
//│     Q.implement(this);
//│     this.p = fields.p;
//│     this.q = fields.q;
//│     this.r = fields.r;
//│     this.s = fields.s;
//│   }
//│ }
//│ // End of generated code
