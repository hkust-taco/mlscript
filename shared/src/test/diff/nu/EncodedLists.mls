:NewDefs
:NoJS


class List<A> {
  fun match: forall 'res: (ifNil: () => 'res, ifCons: ('res, List[A]) => 'res) => 'res
  fun match = error // TODO use self-type...
}
let Nil: List<nothing>
let Cons: (head: 'a, tail: List<'a>) => List<'a>
//│ ╔══[ERROR] Not a recognized type
//│ ║  l.6: 	  fun match: forall 'res: (ifNil: () => 'res, ifCons: ('res, List[A]) => 'res) => 'res
//│ ╙──     	                                              ^^^^^^
//│ class List[A] {
//│   constructor()
//│   fun match: anything
//│ }
//│ let Nil: List[nothing]
//│ let Cons: forall 'a. (head: 'a, tail: List['a]) -> List['a]

let x: List<Int>
//│ let x: List[Int]

// FIXME
x: List<anything>
//│ ╔══[ERROR] Type mismatch in type ascription:
//│ ║  l.25: 	x: List<anything>
//│ ║        	^
//│ ╙── expression of type `anything` is not an instance of type `Int`
//│ List[anything]


