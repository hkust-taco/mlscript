:NewDefs


// * Adapted example from Code reuse through polymorphic variants (FOSE 2000)


class Cons[out A](head: A, tail: Cons[A] | Nil)
module Nil
//│ class Cons[A](head: A, tail: Cons[A] | Nil)
//│ module Nil

let l = Cons(1, Nil)
//│ let l: Cons[1]
//│ l
//│   = Cons {}

class NotFound()
class Success[out A](result: A)
//│ class NotFound()
//│ class Success[A](result: A)

fun list_assoc(s, l) =
  if l is
    Cons(h, t) then
      if s === h.0 then Success(h.1)
      else list_assoc(s, t)
    Nil then NotFound()
//│ fun list_assoc: forall 'a 'A. (Eql['a], Cons[{0: 'a, 1: 'A}] | Nil) -> (NotFound | Success['A])

// fun list_assoc(s: Str, l: Cons[{ _1: Str, _2: 'b }] | Nil): NotFound | Success['b]

class Var(s: Str)
//│ class Var(s: Str)

mixin EvalVar {
  fun eval(sub, v) =
    if v is Var(s) then
      if list_assoc(s, sub) is
        NotFound then v
        Success(r) then r
}
//│ mixin EvalVar() {
//│   fun eval: (Cons[{0: anything, 1: 'a}] | Nil, Var) -> (Var | 'a)
//│ }

class Abs[out A](x: Str, t: A)
class App[out A](s: A, t: A)
//│ class Abs[A](x: Str, t: A)
//│ class App[A](s: A, t: A)

type A = Abs[Var] | App[Object & ~Abs]
//│ type A = Abs[Var] | App[Object & ~#Abs]

fun gensym(): Str = "fun"
//│ fun gensym: () -> Str

fun int_to_string(x: Int): Str = "0"
//│ fun int_to_string: (x: Int) -> Str

mixin EvalLambda {
  fun eval(sub, v) =
    if v is
      App(t1, t2) then
        let l1 = this.eval(sub, t1)
        let l2 = this.eval(sub, t2)
        if t1 is
          Abs(x, t) then this.eval(Cons([x, l2], Nil), t)
        else
          App(l1, l2)
      Abs(x, t) then
        let s = gensym()
        Abs(s, this.eval(Cons([x, Var(s)], sub), t))
    else
      super.eval(sub, v)
}
//│ mixin EvalLambda() {
//│   super: {eval: ('a, 'b) -> 'c}
//│   this: {
//│     eval: (Cons[[Str, Var] | 'A], 'd) -> 'A0 & (Cons[[Str, 'A1]], 'e) -> 'c & ('a, 'f) -> 'A1
//│   }
//│   fun eval: ('a & (Cons['A] | Nil), Abs['d] | App['f & (Abs['e] | Object & ~#Abs)] | Object & 'b & ~#Abs & ~#App) -> (Abs['A0] | App['A1] | 'c)
//│ }

module Test1 extends EvalVar, EvalLambda
//│ module Test1 {
//│   fun eval: (Cons[{0: anything, 1: 'a}] | Nil, 'b) -> 'a
//│ }
//│ where
//│   'b <: Abs['b] | App['b & (Abs['b] | Object & ~#Abs)] | Var
//│   'a :> Var | Abs['a] | App['a]

let r = Test1.eval(Nil, Var("a"))
//│ let r: 'a
//│   where
//│     'a :> Var | Abs['a] | App['a]
//│ r
//│   = Var {}

:ds
r
//│ ⬤ Initial: TypedTypingUnit(
//│ 	Some(α528))
//│  where: 
//│ 		α227_480 :> (α216_481 | α218_487)
//│ 		α216_481 :> ((α227_480 | α247_482) | α250_484)
//│ 		α247_482 :> Abs[A175_483]
//│ 		A175_483 :> ((α227_480 | α247_482) | α250_484)
//│ 		α250_484 :> (#Var<Object> | α143_485)
//│ 		α143_485 :> α143_486
//│ 		α143_486 :> ((α227_480 | α247_482) | α250_484) | Var
//│ 		α218_487 :> App[A177_488]
//│ 		A177_488 :> ((α227_480 | α247_482) | α250_484)
//│ 		α528 :> ‹∀ 2. (α227_529''' | (α247_531''' | α250_484))› <: r538
//│ 		α227_529''' :> (α216_481 | α218_530''') <: α227_480
//│ 		α218_530''' :> App[A177_488] <: α218_487
//│ 		α247_531''' :> Abs[A175_483] <: α247_482
//│ 		r538 :> ‹∀ 2. (α227_529''' | (α247_531''' | α250_484))›
//│ allVarPols: +α227_480, +α216_481, +α247_482, +A175_483, +α250_484, +α143_485, +α143_486, +α218_487, +A177_488, +α528, +α227_529''', +α218_530''', +α247_531'''
//│ Renewed α528 ~> α528_556
//│ Renewed α227_529''' ~> α227_557'''
//│ Renewed α216_481 ~> α216_558
//│ Renewed α227_480 ~> α227_559
//│ Renewed α218_487 ~> α218_560
//│ Renewed A177_488 ~> A177_561
//│ Renewed α247_482 ~> α247_562
//│ Renewed A175_483 ~> A175_563
//│ Renewed α250_484 ~> α250_564
//│ Renewed α143_485 ~> α143_565
//│ Renewed α143_486 ~> α143_566
//│ Renewed α218_530''' ~> α218_567'''
//│ Renewed α247_531''' ~> α247_568'''
//│ ⬤ Cleaned up: TypedTypingUnit(
//│ 	Some(α528_556))
//│  where: 
//│ 		α528_556 :> ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›
//│ 		α227_557''' :> (α216_558 | α218_567''')
//│ 		α216_558 :> ((α227_559 | α247_562) | α250_564)
//│ 		α227_559 :> (α216_558 | α218_560)
//│ 		α218_560 :> App[A177_561]
//│ 		A177_561 :> ((α227_559 | α247_562) | α250_564)
//│ 		α247_562 :> Abs[A175_563]
//│ 		A175_563 :> ((α227_559 | α247_562) | α250_564)
//│ 		α250_564 :> (#Var<Object> | α143_565)
//│ 		α143_565 :> α143_566
//│ 		α143_566 :> (((α227_559 | α247_562) | α250_564) | Var)
//│ 		α218_567''' :> App[A177_561]
//│ 		α247_568''' :> Abs[A175_563]
//│ allVarPols: +α528_556, +α227_557''', +α216_558, +α227_559, +α218_560, +A177_561, +α247_562, +A175_563, +α250_564, +α143_565, +α143_566, +α218_567''', +α247_568'''
//│ consed: Map()
//│ ⬤ Unskid: TypedTypingUnit(
//│ 	Some(α528_556))
//│  where: 
//│ 		α528_556 :> ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›
//│ 		α227_557''' :> (α216_558 | α218_567''')
//│ 		α216_558 :> ((α227_559 | α247_562) | α250_564)
//│ 		α227_559 :> (α216_558 | α218_560)
//│ 		α218_560 :> App[A177_561]
//│ 		A177_561 :> ((α227_559 | α247_562) | α250_564)
//│ 		α247_562 :> Abs[A175_563]
//│ 		A175_563 :> ((α227_559 | α247_562) | α250_564)
//│ 		α250_564 :> (#Var<Object> | α143_565)
//│ 		α143_565 :> α143_566
//│ 		α143_566 :> (((α227_559 | α247_562) | α250_564) | Var)
//│ 		α218_567''' :> App[A177_561]
//│ 		α247_568''' :> Abs[A175_563]
//│ analyze1[+] α528_556
//│ | analyze1[+;@[+](0)] ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›
//│ | | analyze1[+;@[+](0);Q(0)] (α227_557''' | (α247_568''' | α250_564))
//│ | | | analyze1[+;@[+](0);Q(0)] α227_557'''
//│ | | | | analyze1[+;@[+](0);Q(0);@[+](0)] (α216_558 | α218_567''')
//│ | | | | | analyze1[+;@[+](0);Q(0);@[+](0)] α216_558
//│ | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0)] ((α227_559 | α247_562) | α250_564)
//│ | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0)] (α227_559 | α247_562)
//│ | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0)] α227_559
//│ | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)] (α216_558 | α218_560)
//│ | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)] α216_558
//│ | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)] α218_560
//│ | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)] App[A177_561]
//│ | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)] A177_561
//│ | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] ((α227_559 | α247_562) | α250_564)
//│ | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] (α227_559 | α247_562)
//│ | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α227_559
//│ | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α247_562
//│ | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] Abs[A175_563]
//│ | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] A175_563
//│ | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] ((α227_559 | α247_562) | α250_564)
//│ | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] (α227_559 | α247_562)
//│ | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α227_559
//│ | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α247_562
//│ | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α250_564
//│ | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] (#Var<Object> | α143_565)
//│ | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] #Var<Object>
//│ | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α143_565
//│ | | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α143_566
//│ | | | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] (((α227_559 | α247_562) | α250_564) | Var)
//│ | | | | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] ((α227_559 | α247_562) | α250_564)
//│ | | | | | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] (α227_559 | α247_562)
//│ | | | | | | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α227_559
//│ | | | | | | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α247_562
//│ | | | | | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α250_564
//│ | | | | | | | | | | | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] Var
//│ | | | | | | | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0);@[+](0)] α250_564
//│ | | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0)] α247_562
//│ | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0)] α250_564
//│ | | | | | analyze1[+;@[+](0);Q(0);@[+](0)] α218_567'''
//│ | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0)] App[A177_561]
//│ | | | | | | | analyze1[+;@[+](0);Q(0);@[+](0);@[+](0)] A177_561
//│ | | | analyze1[+;@[+](0);Q(0)] (α247_568''' | α250_564)
//│ | | | | analyze1[+;@[+](0);Q(0)] α247_568'''
//│ | | | | | analyze1[+;@[+](0);Q(0);@[+](0)] Abs[A175_563]
//│ | | | | | | analyze1[+;@[+](0);Q(0);@[+](0)] A175_563
//│ | | | | analyze1[+;@[+](0);Q(0)] α250_564
//│ [inv] 
//│ [nums] +α528_556 1 ; +α227_557''' 1 ; +α216_558 2 ; +α227_559 4 ; +α218_560 1 ; +A177_561 2 ; +α247_562 4 ; +A175_563 2 ; +α250_564 5 ; +α143_565 1 ; +α143_566 1 ; +α218_567''' 1 ; +α247_568''' 1
//│ analyze2[+] α528_556
//│ | >> Processing α528_556 at [+]
//│ | go α528_556   ()
//│ | | go ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›   (α528_556)
//│ | >> Occurrences LinkedHashSet(α528_556, ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›)
//│ | >>>> occs[+α528_556] := LinkedHashSet(α528_556, ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›)  <~ None
//│ | analyze2[+] ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›
//│ | | analyze2[+;Q(0)] (α227_557''' | (α247_568''' | α250_564))
//│ | | | Components Set((Some(true),α227_557'''), (Some(true),α247_568'''), (Some(true),α250_564))
//│ | | | >> Processing (α227_557''' | (α247_568''' | α250_564)) at [+]
//│ | | | go (α227_557''' | (α247_568''' | α250_564))   ()
//│ | | | | go α227_557'''   ()
//│ | | | | | go (α216_558 | α218_567''')   (α227_557''')
//│ | | | | | | go α216_558   (α227_557''')
//│ | | | | | | | go ((α227_559 | α247_562) | α250_564)   (α227_557''', α216_558)
//│ | | | | | | | | go (α227_559 | α247_562)   (α227_557''', α216_558)
//│ | | | | | | | | | go α227_559   (α227_557''', α216_558)
//│ | | | | | | | | | | go (α216_558 | α218_560)   (α227_557''', α216_558, α227_559)
//│ | | | | | | | | | | | go α216_558   (α227_557''', α216_558, α227_559)
//│ | | | | | | | | | | | go α218_560   (α227_557''', α216_558, α227_559)
//│ | | | | | | | | | | | | go App[A177_561]   (α227_557''', α216_558, α227_559, α218_560)
//│ | | | | | | | | | go α247_562   (α227_557''', α216_558, α227_559, α218_560, App[A177_561])
//│ | | | | | | | | | | go Abs[A175_563]   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562)
//│ | | | | | | | | go α250_564   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563])
//│ | | | | | | | | | go (#Var<Object> | α143_565)   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564)
//│ | | | | | | | | | | go #Var<Object>   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564)
//│ | | | | | | | | | | go α143_565   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>)
//│ | | | | | | | | | | | go α143_566   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565)
//│ | | | | | | | | | | | | go (((α227_559 | α247_562) | α250_564) | Var)   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | go ((α227_559 | α247_562) | α250_564)   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | go (α227_559 | α247_562)   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | go α227_559   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | go α247_562   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | go α250_564   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | go Var   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | go α218_567'''   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)
//│ | | | | | | | go App[A177_561]   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''')
//│ | | | | go (α247_568''' | α250_564)   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''')
//│ | | | | | go α247_568'''   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''')
//│ | | | | | | go Abs[A175_563]   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')
//│ | | | | | go α250_564   (α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')
//│ | | | >> Occurrences LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')
//│ | | | >>>> occs[+α227_557'''] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α216_558] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α227_559] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α218_560] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α247_562] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α250_564] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α143_565] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α143_566] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α218_567'''] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | >>>> occs[+α247_568'''] := LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568''')  <~ None
//│ | | | analyze2[+;Q(0)] App[A177_561]
//│ | | | | analyze2[+;Q(0)] A177_561
//│ | | | | | >> Processing A177_561 at [+]
//│ | | | | | go A177_561   ()
//│ | | | | | | go ((α227_559 | α247_562) | α250_564)   (A177_561)
//│ | | | | | | | go (α227_559 | α247_562)   (A177_561)
//│ | | | | | | | | go α227_559   (A177_561)
//│ | | | | | | | | | go (α216_558 | α218_560)   (A177_561, α227_559)
//│ | | | | | | | | | | go α216_558   (A177_561, α227_559)
//│ | | | | | | | | | | | go ((α227_559 | α247_562) | α250_564)   (A177_561, α227_559, α216_558)
//│ | | | | | | | | | | | | go (α227_559 | α247_562)   (A177_561, α227_559, α216_558)
//│ | | | | | | | | | | | | | go α227_559   (A177_561, α227_559, α216_558)
//│ | | | | | | | | | | | | | go α247_562   (A177_561, α227_559, α216_558)
//│ | | | | | | | | | | | | | | go Abs[A175_563]   (A177_561, α227_559, α216_558, α247_562)
//│ | | | | | | | | | | | | go α250_564   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563])
//│ | | | | | | | | | | | | | go (#Var<Object> | α143_565)   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564)
//│ | | | | | | | | | | | | | | go #Var<Object>   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564)
//│ | | | | | | | | | | | | | | go α143_565   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>)
//│ | | | | | | | | | | | | | | | go α143_566   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565)
//│ | | | | | | | | | | | | | | | | go (((α227_559 | α247_562) | α250_564) | Var)   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | go ((α227_559 | α247_562) | α250_564)   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | go (α227_559 | α247_562)   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | | go α227_559   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | | go α247_562   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | go α250_564   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | go Var   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | go α218_560   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)
//│ | | | | | | | | | | | go App[A177_561]   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560)
//│ | | | | | | | | go α247_562   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])
//│ | | | | | | | go α250_564   (A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])
//│ | | | | | >> Occurrences LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])
//│ | | | | | >>>> occs[+A177_561] := LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ None
//│ | | | | | >>>> occs[+α227_559] := LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568'''))
//│ | | | | | >>>> occs[+α216_558] := LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568'''))
//│ | | | | | >>>> occs[+α247_562] := LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568'''))
//│ | | | | | >>>> occs[+α250_564] := LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568'''))
//│ | | | | | >>>> occs[+α143_565] := LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568'''))
//│ | | | | | >>>> occs[+α143_566] := LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568'''))
//│ | | | | | >>>> occs[+α218_560] := LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α227_557''', α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_567''', α247_568'''))
//│ | | | | | analyze2[+;Q(0)] Abs[A175_563]
//│ | | | | | | analyze2[+;Q(0)] A175_563
//│ | | | | | | | >> Processing A175_563 at [+]
//│ | | | | | | | go A175_563   ()
//│ | | | | | | | | go ((α227_559 | α247_562) | α250_564)   (A175_563)
//│ | | | | | | | | | go (α227_559 | α247_562)   (A175_563)
//│ | | | | | | | | | | go α227_559   (A175_563)
//│ | | | | | | | | | | | go (α216_558 | α218_560)   (A175_563, α227_559)
//│ | | | | | | | | | | | | go α216_558   (A175_563, α227_559)
//│ | | | | | | | | | | | | | go ((α227_559 | α247_562) | α250_564)   (A175_563, α227_559, α216_558)
//│ | | | | | | | | | | | | | | go (α227_559 | α247_562)   (A175_563, α227_559, α216_558)
//│ | | | | | | | | | | | | | | | go α227_559   (A175_563, α227_559, α216_558)
//│ | | | | | | | | | | | | | | | go α247_562   (A175_563, α227_559, α216_558)
//│ | | | | | | | | | | | | | | | | go Abs[A175_563]   (A175_563, α227_559, α216_558, α247_562)
//│ | | | | | | | | | | | | | | go α250_564   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563])
//│ | | | | | | | | | | | | | | | go (#Var<Object> | α143_565)   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564)
//│ | | | | | | | | | | | | | | | | go #Var<Object>   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564)
//│ | | | | | | | | | | | | | | | | go α143_565   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>)
//│ | | | | | | | | | | | | | | | | | go α143_566   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565)
//│ | | | | | | | | | | | | | | | | | | go (((α227_559 | α247_562) | α250_564) | Var)   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | | go ((α227_559 | α247_562) | α250_564)   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | | | go (α227_559 | α247_562)   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | | | | go α227_559   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | | | | go α247_562   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | | | go α250_564   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | | | | | | | | go Var   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566)
//│ | | | | | | | | | | | | go α218_560   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)
//│ | | | | | | | | | | | | | go App[A177_561]   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560)
//│ | | | | | | | | | | go α247_562   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])
//│ | | | | | | | | | go α250_564   (A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])
//│ | | | | | | | >> Occurrences LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])
//│ | | | | | | | >>>> occs[+A175_563] := LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ None
//│ | | | | | | | >>>> occs[+α227_559] := LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var))
//│ | | | | | | | >>>> occs[+α216_558] := LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var))
//│ | | | | | | | >>>> occs[+α247_562] := LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var))
//│ | | | | | | | >>>> occs[+α250_564] := LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var))
//│ | | | | | | | >>>> occs[+α143_565] := LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var))
//│ | | | | | | | >>>> occs[+α143_566] := LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var))
//│ | | | | | | | >>>> occs[+α218_560] := LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])  <~ Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var))
//│ | | | | | | | analyze2[+;Q(0)] Abs[A175_563]
//│ | | | | | | | | analyze2[+;Q(0)] A175_563
//│ | | | | | | | analyze2[+;Q(0)] #Var<Object>
//│ | | | | | | | analyze2[+;Q(0)] Var
//│ | | | | | | | analyze2[+;Q(0)] App[A177_561]
//│ | | | | | | | | analyze2[+;Q(0)] A177_561
//│ | | | | | analyze2[+;Q(0)] #Var<Object>
//│ | | | | | analyze2[+;Q(0)] Var
//│ | | | | | analyze2[+;Q(0)] App[A177_561]
//│ | | | | | | analyze2[+;Q(0)] A177_561
//│ | | | analyze2[+;Q(0)] Abs[A175_563]
//│ | | | | analyze2[+;Q(0)] A175_563
//│ | | | analyze2[+;Q(0)] #Var<Object>
//│ | | | analyze2[+;Q(0)] Var
//│ [occs] +α528_556 {α528_556,‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›} ; +α227_557''' {α227_557''',α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var,α218_567''',α247_568'''} ; +α216_558 {α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var} ; +α227_559 {α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var} ; +α218_560 {α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var} ; +α247_562 {α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var} ; +α250_564 {α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var} ; +α143_565 {α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var} ; +α143_566 {α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var} ; +α218_567''' {α227_557''',α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var,α218_567''',α247_568'''} ; +α247_568''' {α227_557''',α216_558,α227_559,α218_560,App[A177_561],α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var,α218_567''',α247_568'''} ; +A177_561 {A177_561,α227_559,α216_558,α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var,α218_560,App[A177_561]} ; +A175_563 {A175_563,α227_559,α216_558,α247_562,Abs[A175_563],α250_564,#Var<Object>,α143_565,α143_566,Var,α218_560,App[A177_561]}
//│ [vars] TreeSet(α528_556, α227_557''', α216_558, α227_559, α218_560, A177_561, α247_562, A175_563, α250_564, α143_565, α143_566, α218_567''', α247_568''')
//│ [rec] HashSet(α143_565, α227_559, A177_561, α143_566, α216_558, α247_562, A175_563, α250_564, α218_560)
//│ 0[1] α528_556
//│ 0[1] α227_557'''
//│ 0[1] α218_560
//│ 0[1] α143_565
//│ 0[1] α143_566
//│ 0[1] α218_567'''
//│ 0[1] α247_568'''
//│ 1[!] α528_556
//│ 1[!] α227_557'''
//│ 1[!] α218_567'''
//│ 1[!] α247_568'''
//│ 2[v] α216_558 Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)) None
//│ 2[v] α227_559 Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)) None
//│ 2[v] A177_561 Some(LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])) None
//│ 2[v] α247_562 Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)) None
//│ 2[v] A175_563 Some(LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561])) None
//│ 2[v] α250_564 Some(LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)) None
//│ 3[v] α216_558 +LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var) -
//│ | [w] α227_559 +LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)
//│ | |   [U] α227_559 := α216_558
//│ | [w] α247_562 +LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)
//│ | |   [U] α247_562 := α216_558
//│ | [w] α250_564 +LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)
//│ | |   [U] α250_564 := α216_558
//│ 3[v] A177_561 +LinkedHashSet(A177_561, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561]) -
//│ | [w] α216_558 +LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)
//│ 3[v] A175_563 +LinkedHashSet(A175_563, α227_559, α216_558, α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var, α218_560, App[A177_561]) -
//│ | [w] α216_558 +LinkedHashSet(α216_558, α227_559, α218_560, App[A177_561], α247_562, Abs[A175_563], α250_564, #Var<Object>, α143_565, α143_566, Var)
//│ [sub] α218_560 -> None, α247_562 -> Some(α216_558), α250_564 -> Some(α216_558), α143_565 -> None, α143_566 -> None, α218_567''' -> None, α247_568''' -> None, α528_556 -> None, α227_557''' -> None, α227_559 -> Some(α216_558)
//│ [bounds] 
//│ 		α528_556 :> ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›
//│ 		α227_557''' :> (α216_558 | α218_567''')
//│ 		α216_558 :> (#Var<Object> | α143_565) | Abs[A175_563] | (α216_558 | α218_560) | ((α227_559 | α247_562) | α250_564)
//│ 		α227_559 :> α216_558 <: α216_558
//│ 		α218_560 :> App[A177_561]
//│ 		A177_561 :> ((α227_559 | α247_562) | α250_564)
//│ 		α247_562 :> α216_558 <: α216_558
//│ 		A175_563 :> ((α227_559 | α247_562) | α250_564)
//│ 		α250_564 :> α216_558 <: α216_558
//│ 		α143_565 :> α143_566
//│ 		α143_566 :> (((α227_559 | α247_562) | α250_564) | Var)
//│ 		α218_567''' :> App[A177_561]
//│ 		α247_568''' :> Abs[A175_563]
//│ [rec] Set(α216_558, A177_561, A175_563)
//│ transform[+] α528_556   ()  +  None
//│ | -> bound Some(true)
//│ | transform[+] ‹∀ 2. (α227_557''' | (α247_568''' | α250_564))›   (α528_556)  +;@[+](0)  None
//│ | | transform[+] (α227_557''' | (α247_568''' | α250_564))   (α528_556)  +;@[+](0);Q(0)  Some(2)
//│ | | | transform[+] α227_557'''   (α528_556)  +;@[+](0);Q(0)  Some(2)
//│ | | | | -> bound Some(true)
//│ | | | | transform[+] (α216_558 | α218_567''')   (α528_556, α227_557''')  +;@[+](0);Q(0);@[+](0)  Some(2)
//│ | | | | | transform[+] α216_558   (α528_556, α227_557''')  +;@[+](0);Q(0);@[+](0)  Some(2)
//│ | | | | | | Renewed α216_558 ~> α216_569
//│ | | | | | | Setting [±] bounds of α216_569... (failing +, inlineBounds true, !occursInvariantly true, !recVars.contains(tv) false)
//│ | | | | | | | transform[+] (#Var<Object> | α143_565)   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | transform[+] #Var<Object>   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | ~> #Var<Object>
//│ | | | | | | | | transform[+] α143_565   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | -> bound Some(true)
//│ | | | | | | | | | transform[+] α143_566   (α216_558, α143_565)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | -> bound Some(true)
//│ | | | | | | | | | | transform[+] (((α227_559 | α247_562) | α250_564) | Var)   (α216_558, α143_565, α143_566)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | transform[+] ((α227_559 | α247_562) | α250_564)   (α216_558, α143_565, α143_566)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | transform[+] (α227_559 | α247_562)   (α216_558, α143_565, α143_566)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | transform[+] α227_559   (α216_558, α143_565, α143_566)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | | | transform[+] α216_558   (α216_558, α143_565, α143_566, α227_559)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | | | | | transform[+] α247_562   (α216_558, α143_565, α143_566)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | | | transform[+] α216_558   (α216_558, α143_565, α143_566, α247_562)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | | | | transform[+] α250_564   (α216_558, α143_565, α143_566)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | | transform[+] α216_558   (α216_558, α143_565, α143_566, α250_564)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | | | transform[+] Var   (α216_558, α143_565, α143_566)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | ~> Var
//│ | | | | | | | | | | ~> Var
//│ | | | | | | | | | ~> Var
//│ | | | | | | | | ~> Var
//│ | | | | | | | ~> (#Var<Object> | Var)
//│ | | | | | | | transform[+] Abs[A175_563]   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | transform[+] A175_563   ()  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | Renewed A175_563 ~> A175_570
//│ | | | | | | | | | Setting [±] bounds of A175_570... (failing +, inlineBounds true, !occursInvariantly true, !recVars.contains(tv) false)
//│ | | | | | | | | | | transform[+] ((α227_559 | α247_562) | α250_564)   (A175_563)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | transform[+] (α227_559 | α247_562)   (A175_563)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | transform[+] α227_559   (A175_563)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | | transform[+] α216_558   (A175_563, α227_559)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | transform[+] α247_562   (A175_563)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | | transform[+] α216_558   (A175_563, α247_562)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | transform[+] α250_564   (A175_563)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | transform[+] α216_558   (A175_563, α250_564)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | ~> α216_569
//│ | | | | | | | | ~> A175_570
//│ | | | | | | | ~> Abs[A175_570]
//│ | | | | | | | transform[+] (α216_558 | α218_560)   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | transform[+] α216_558   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | ~> ⊥
//│ | | | | | | | | transform[+] α218_560   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | -> bound Some(true)
//│ | | | | | | | | | transform[+] App[A177_561]   (α216_558, α218_560)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | transform[+] A177_561   ()  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | Renewed A177_561 ~> A177_571
//│ | | | | | | | | | | | Setting [±] bounds of A177_571... (failing +, inlineBounds true, !occursInvariantly true, !recVars.contains(tv) false)
//│ | | | | | | | | | | | | transform[+] ((α227_559 | α247_562) | α250_564)   (A177_561)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | transform[+] (α227_559 | α247_562)   (A177_561)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | transform[+] α227_559   (A177_561)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | | | | transform[+] α216_558   (A177_561, α227_559)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | | | transform[+] α247_562   (A177_561)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | | | | transform[+] α216_558   (A177_561, α247_562)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | | transform[+] α250_564   (A177_561)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | | | | | transform[+] α216_558   (A177_561, α250_564)  +;@[+](0);Q(0);@[+](0);@[+](0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | | | ~> α216_569
//│ | | | | | | | | | | ~> A177_571
//│ | | | | | | | | | ~> App[A177_571]
//│ | | | | | | | | ~> App[A177_571]
//│ | | | | | | | ~> App[A177_571]
//│ | | | | | | | transform[+] ((α227_559 | α247_562) | α250_564)   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | transform[+] (α227_559 | α247_562)   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | transform[+] α227_559   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | transform[+] α216_558   (α216_558, α227_559)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | ~> ⊥
//│ | | | | | | | | | transform[+] α247_562   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | -> α216_558
//│ | | | | | | | | | | transform[+] α216_558   (α216_558, α247_562)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | | ~> ⊥
//│ | | | | | | | | | ~> ⊥
//│ | | | | | | | | ~> ⊥
//│ | | | | | | | | transform[+] α250_564   (α216_558)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | -> α216_558
//│ | | | | | | | | | transform[+] α216_558   (α216_558, α250_564)  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | | | ~> ⊥
//│ | | | | | | | | ~> ⊥
//│ | | | | | | | ~> ⊥
//│ | | | | | ~> α216_569
//│ | | | | | transform[+] α218_567'''   (α528_556, α227_557''')  +;@[+](0);Q(0);@[+](0)  Some(2)
//│ | | | | | | -> bound Some(true)
//│ | | | | | | transform[+] App[A177_561]   (α528_556, α227_557''', α218_567''')  +;@[+](0);Q(0);@[+](0);@[+](0)  Some(2)
//│ | | | | | | | transform[+] A177_561   ()  +;@[+](0);Q(0);@[+](0);@[+](0)  None
//│ | | | | | | | ~> A177_571
//│ | | | | | | ~> App[A177_571]
//│ | | | | | ~> App[A177_571]
//│ | | | | ~> (α216_569 | App[A177_571])
//│ | | | ~> (α216_569 | App[A177_571])
//│ | | | transform[+] (α247_568''' | α250_564)   (α528_556)  +;@[+](0);Q(0)  Some(2)
//│ | | | | transform[+] α247_568'''   (α528_556)  +;@[+](0);Q(0)  Some(2)
//│ | | | | | -> bound Some(true)
//│ | | | | | transform[+] Abs[A175_563]   (α528_556, α247_568''')  +;@[+](0);Q(0);@[+](0)  Some(2)
//│ | | | | | | transform[+] A175_563   ()  +;@[+](0);Q(0);@[+](0)  None
//│ | | | | | | ~> A175_570
//│ | | | | | ~> Abs[A175_570]
//│ | | | | ~> Abs[A175_570]
//│ | | | | transform[+] α250_564   (α528_556)  +;@[+](0);Q(0)  Some(2)
//│ | | | | | -> α216_558
//│ | | | | | transform[+] α216_558   (α528_556, α250_564)  +;@[+](0);Q(0)  Some(2)
//│ | | | | | ~> α216_569
//│ | | | | ~> α216_569
//│ | | | ~> (Abs[A175_570] | α216_569)
//│ | | ~> ((α216_569 | App[A177_571]) | (Abs[A175_570] | α216_569))
//│ | ~> ((α216_569 | App[A177_571]) | (Abs[A175_570] | α216_569))
//│ ~> ((α216_569 | App[A177_571]) | (Abs[A175_570] | α216_569))
//│ ⬤ Type after simplification: TypedTypingUnit(
//│ 	Some(((α216_569 | App[A177_571]) | (Abs[A175_570] | α216_569))))
//│  where: 
//│ 		α216_569 :> (#Var<Object> | Var) | Abs[A175_570] | App[A177_571] | ⊥
//│ 		A175_570 :> α216_569
//│ 		A177_571 :> α216_569
//│ allVarPols: +α216_569, +A175_570, +A177_571
//│ normLike[+] TypedTypingUnit(
//│ 	Some(((α216_569 | App[A177_571]) | (Abs[A175_570] | α216_569))))
//│ | norm[+] ((α216_569 | App[A177_571]) | (Abs[A175_570] | α216_569))
//│ | | DNF: DNF(0, α216_569 | #App<Object>{}∧App[A177_571] | #Abs<Object>{}∧Abs[A175_570])
//│ | | comparePartial(#App<Object>{}∧App[A177_571], α216_569)
//│ | | = -1
//│ | | comparePartial(#Abs<Object>{}∧Abs[A175_570], #App<Object>{}∧App[A177_571])
//│ | | = -14
//│ | | norm[=] A175_570
//│ | | | DNF: DNF(0, A175_570)
//│ | | | norm[+] α216_569
//│ | | | | DNF: DNF(0, α216_569)
//│ | | | | norm[+] (#Var<Object> | Var)
//│ | | | | | DNF: DNF(0, #Var<Object>{})
//│ | | | | | rcd2 {}
//│ | | | | | typeRef Var
//│ | | | | | clsFields 
//│ | | | | | C Var List(Var)
//│ | | | | ~> Var
//│ | | | | norm[+] Abs[A175_570]
//│ | | | | | DNF: DNF(0, #Abs<Object>{}∧Abs[A175_570])
//│ | | | | | norm[=] A175_570
//│ | | | | | | DNF: DNF(0, A175_570)
//│ | | | | | | C A175_570 List(A175_570)
//│ | | | | | | DNF: DNF(0, A175_570)
//│ | | | | | | C A175_570 List(A175_570)
//│ | | | | | ~> A175_570
//│ | | | | | rcd2 {}
//│ | | | | | typeRef Abs[A175_570]
//│ | | | | | Passing A :: A175' <=< A175_570
//│ | | | | | clsFields Var(Abs#A) -> A175_570
//│ | | | | | C Abs[A175_570] List(Abs[A175_570])
//│ | | | | ~> Abs[A175_570]
//│ | | | | norm[+] App[A177_571]
//│ | | | | | DNF: DNF(0, #App<Object>{}∧App[A177_571])
//│ | | | | | norm[=] A177_571
//│ | | | | | | DNF: DNF(0, A177_571)
//│ | | | | | | norm[+] α216_569
//│ | | | | | | | DNF: DNF(0, α216_569)
//│ | | | | | | | C α216_569 List(α216_569)
//│ | | | | | | ~> α216_569
//│ | | | | | | C A177_571 List(A177_571)
//│ | | | | | | DNF: DNF(0, A177_571)
//│ | | | | | | C A177_571 List(A177_571)
//│ | | | | | ~> A177_571
//│ | | | | | rcd2 {}
//│ | | | | | typeRef App[A177_571]
//│ | | | | | Passing A :: A177' <=< A177_571
//│ | | | | | clsFields Var(App#A) -> A177_571
//│ | | | | | C App[A177_571] List(App[A177_571])
//│ | | | | ~> App[A177_571]
//│ | | | | norm[+] ⊥
//│ | | | | | DNF: DNF(0, )
//│ | | | | | C ⊥ List()
//│ | | | | ~> ⊥
//│ | | | | C α216_569 List(α216_569)
//│ | | | ~> α216_569
//│ | | | C A175_570 List(A175_570)
//│ | | | DNF: DNF(0, A175_570)
//│ | | | C A175_570 List(A175_570)
//│ | | ~> A175_570
//│ | | rcd2 {}
//│ | | typeRef Abs[A175_570]
//│ | | Passing A :: A175' <=< A175_570
//│ | | clsFields Var(Abs#A) -> A175_570
//│ | | norm[=] A177_571
//│ | | | DNF: DNF(0, A177_571)
//│ | | | C A177_571 List(A177_571)
//│ | | | DNF: DNF(0, A177_571)
//│ | | | C A177_571 List(A177_571)
//│ | | ~> A177_571
//│ | | rcd2 {}
//│ | | typeRef App[A177_571]
//│ | | Passing A :: A177' <=< A177_571
//│ | | clsFields Var(App#A) -> A177_571
//│ | | C ((Abs[A175_570] | App[A177_571]) | α216_569) List(Abs[A175_570], App[A177_571], α216_569)
//│ | ~> α216_569
//│ ⬤ Normalized: TypedTypingUnit(
//│ 	Some(α216_569))
//│  where: 
//│ 		α216_569 :> Var | Abs[A175_570] | App[A177_571] | ⊥
//│ 		A175_570 :> α216_569
//│ 		A177_571 :> α216_569
//│ allVarPols: +α216_569, +A175_570, +A177_571
//│ ⬤ Cleaned up: TypedTypingUnit(
//│ 	Some(α216_569))
//│  where: 
//│ 		α216_569 :> ((Var | Abs[A175_570]) | App[A177_571])
//│ 		A175_570 :> α216_569
//│ 		A177_571 :> α216_569
//│ allVarPols: +α216_569, +A175_570, +A177_571
//│ consed: Map()
//│ ⬤ Unskid: TypedTypingUnit(
//│ 	Some(α216_569))
//│  where: 
//│ 		α216_569 :> ((Var | Abs[A175_570]) | App[A177_571])
//│ 		A175_570 :> α216_569
//│ 		A177_571 :> α216_569
//│ analyze1[+] α216_569
//│ | analyze1[+;@[+](0)] ((Var | Abs[A175_570]) | App[A177_571])
//│ | | analyze1[+;@[+](0)] (Var | Abs[A175_570])
//│ | | | analyze1[+;@[+](0)] Var
//│ | | | analyze1[+;@[+](0)] Abs[A175_570]
//│ | | | | analyze1[+;@[+](0)] A175_570
//│ | | | | | analyze1[+;@[+](0);@[+](0)] α216_569
//│ | | analyze1[+;@[+](0)] App[A177_571]
//│ | | | analyze1[+;@[+](0)] A177_571
//│ | | | | analyze1[+;@[+](0);@[+](0)] α216_569
//│ [inv] 
//│ [nums] +α216_569 3 ; +A175_570 1 ; +A177_571 1
//│ analyze2[+] α216_569
//│ | >> Processing α216_569 at [+]
//│ | go α216_569   ()
//│ | | go ((Var | Abs[A175_570]) | App[A177_571])   (α216_569)
//│ | | | go (Var | Abs[A175_570])   (α216_569)
//│ | | | | go Var   (α216_569)
//│ | | | | go Abs[A175_570]   (α216_569, Var)
//│ | | | go App[A177_571]   (α216_569, Var, Abs[A175_570])
//│ | >> Occurrences LinkedHashSet(α216_569, Var, Abs[A175_570], App[A177_571])
//│ | >>>> occs[+α216_569] := LinkedHashSet(α216_569, Var, Abs[A175_570], App[A177_571])  <~ None
//│ | analyze2[+] Var
//│ | analyze2[+] Abs[A175_570]
//│ | | analyze2[+] A175_570
//│ | | | >> Processing A175_570 at [+]
//│ | | | go A175_570   ()
//│ | | | | go α216_569   (A175_570)
//│ | | | | | go ((Var | Abs[A175_570]) | App[A177_571])   (A175_570, α216_569)
//│ | | | | | | go (Var | Abs[A175_570])   (A175_570, α216_569)
//│ | | | | | | | go Var   (A175_570, α216_569)
//│ | | | | | | | go Abs[A175_570]   (A175_570, α216_569, Var)
//│ | | | | | | go App[A177_571]   (A175_570, α216_569, Var, Abs[A175_570])
//│ | | | >> Occurrences LinkedHashSet(A175_570, α216_569, Var, Abs[A175_570], App[A177_571])
//│ | | | >>>> occs[+A175_570] := LinkedHashSet(A175_570, α216_569, Var, Abs[A175_570], App[A177_571])  <~ None
//│ | | | >>>> occs[+α216_569] := LinkedHashSet(A175_570, α216_569, Var, Abs[A175_570], App[A177_571])  <~ Some(LinkedHashSet(α216_569, Var, Abs[A175_570], App[A177_571]))
//│ | | | analyze2[+] Var
//│ | | | analyze2[+] Abs[A175_570]
//│ | | | | analyze2[+] A175_570
//│ | | | analyze2[+] App[A177_571]
//│ | | | | analyze2[+] A177_571
//│ | | | | | >> Processing A177_571 at [+]
//│ | | | | | go A177_571   ()
//│ | | | | | | go α216_569   (A177_571)
//│ | | | | | | | go ((Var | Abs[A175_570]) | App[A177_571])   (A177_571, α216_569)
//│ | | | | | | | | go (Var | Abs[A175_570])   (A177_571, α216_569)
//│ | | | | | | | | | go Var   (A177_571, α216_569)
//│ | | | | | | | | | go Abs[A175_570]   (A177_571, α216_569, Var)
//│ | | | | | | | | go App[A177_571]   (A177_571, α216_569, Var, Abs[A175_570])
//│ | | | | | >> Occurrences LinkedHashSet(A177_571, α216_569, Var, Abs[A175_570], App[A177_571])
//│ | | | | | >>>> occs[+A177_571] := LinkedHashSet(A177_571, α216_569, Var, Abs[A175_570], App[A177_571])  <~ None
//│ | | | | | >>>> occs[+α216_569] := LinkedHashSet(A177_571, α216_569, Var, Abs[A175_570], App[A177_571])  <~ Some(LinkedHashSet(α216_569, Var, Abs[A175_570], App[A177_571]))
//│ | | | | | analyze2[+] Var
//│ | | | | | analyze2[+] Abs[A175_570]
//│ | | | | | | analyze2[+] A175_570
//│ | | | | | analyze2[+] App[A177_571]
//│ | | | | | | analyze2[+] A177_571
//│ | analyze2[+] App[A177_571]
//│ | | analyze2[+] A177_571
//│ [occs] +α216_569 {α216_569,Var,Abs[A175_570],App[A177_571]} ; +A175_570 {A175_570,α216_569,Var,Abs[A175_570],App[A177_571]} ; +A177_571 {A177_571,α216_569,Var,Abs[A175_570],App[A177_571]}
//│ [vars] TreeSet(α216_569, A175_570, A177_571)
//│ [rec] Set(α216_569, A175_570, A177_571)
//│ 0[1] A175_570
//│ 0[1] A177_571
//│ 2[v] α216_569 Some(LinkedHashSet(α216_569, Var, Abs[A175_570], App[A177_571])) None
//│ 3[v] α216_569 +LinkedHashSet(α216_569, Var, Abs[A175_570], App[A177_571]) -
//│ [sub] A175_570 -> None, A177_571 -> None
//│ [bounds] 
//│ 		α216_569 :> ((Var | Abs[A175_570]) | App[A177_571])
//│ 		A175_570 :> α216_569
//│ 		A177_571 :> α216_569
//│ [rec] Set(α216_569)
//│ transform[+] α216_569   ()  +  None
//│ | Renewed α216_569 ~> α216_572
//│ | Setting [±] bounds of α216_572... (failing +, inlineBounds true, !occursInvariantly true, !recVars.contains(tv) false)
//│ | | transform[+] ((Var | Abs[A175_570]) | App[A177_571])   (α216_569)  +;@[+](0)  None
//│ | | | transform[+] (Var | Abs[A175_570])   (α216_569)  +;@[+](0)  None
//│ | | | | transform[+] Var   (α216_569)  +;@[+](0)  None
//│ | | | | ~> Var
//│ | | | | transform[+] Abs[A175_570]   (α216_569)  +;@[+](0)  None
//│ | | | | | transform[+] A175_570   ()  +;@[+](0)  None
//│ | | | | | | -> bound Some(true)
//│ | | | | | | transform[+] α216_569   (A175_570)  +;@[+](0);@[+](0)  None
//│ | | | | | | ~> α216_572
//│ | | | | | ~> α216_572
//│ | | | | ~> Abs[α216_572]
//│ | | | ~> (Var | Abs[α216_572])
//│ | | | transform[+] App[A177_571]   (α216_569)  +;@[+](0)  None
//│ | | | | transform[+] A177_571   ()  +;@[+](0)  None
//│ | | | | | -> bound Some(true)
//│ | | | | | transform[+] α216_569   (A177_571)  +;@[+](0);@[+](0)  None
//│ | | | | | ~> α216_572
//│ | | | | ~> α216_572
//│ | | | ~> App[α216_572]
//│ | | ~> ((Var | Abs[α216_572]) | App[α216_572])
//│ ~> α216_572
//│ ⬤ Resim: TypedTypingUnit(
//│ 	Some(α216_572))
//│  where: 
//│ 		α216_572 :> ((Var | Abs[α216_572]) | App[α216_572])
//│ allVarPols: +α216_572
//│ Consider α216_572
//│ [subs] HashMap()
//│ ⬤ Factored: TypedTypingUnit(
//│ 	Some(α216_572))
//│  where: 
//│ 		α216_572 :> ((Var | Abs[α216_572]) | App[α216_572])
//│ 'a
//│   where
//│     'a :> Var | Abs['a] | App['a]
//│ res
//│     = Var {}

Test1.eval(Nil, Abs("b", Var("a")))
//│ 'a
//│   where
//│     'a :> Var | Abs['a] | App['a]
//│ res
//│     = Abs {}

Test1.eval(Cons(["c", Var("d")], Nil), App(Abs("b", Var("b")), Var("c")))
//│ 'a
//│   where
//│     'a :> Var | Abs['a] | App['a]
//│ res
//│     = Var {}

Test1.eval(Cons(["c", Abs("d", Var("d"))], Nil), App(Abs("b", Var("b")), Var("c")))
//│ 'a
//│   where
//│     'a :> Abs[Var] | Var | Abs['a] | App['a]
//│ res
//│     = Abs {}

class Numb(n: Int)
class Add[out A](l: A, r: A)
class Mul[out A](l: A, r: A)
//│ class Numb(n: Int)
//│ class Add[A](l: A, r: A)
//│ class Mul[A](l: A, r: A)

fun map_expr(f, v) =
  if v is
    Var then v
    Numb then v
    Add(l, r) then Add(f(l), f(r))
    Mul(l, r) then Mul(f(l), f(r))
//│ fun map_expr: forall 'a 'A 'b 'A0. ('a -> 'A & 'b -> 'A0, Add['b] | Mul['a] | Numb | Var) -> (Add['A0] | Mul['A] | Numb | Var)

mixin EvalExpr {
  fun eval(sub, v) =
    let eta(e) = this.eval(sub, e)
    let vv = map_expr(eta, v)
    if vv is
      Var then super.eval(sub, vv)
      Add(Numb(l), Numb(r)) then Numb(l + r)
      Mul(Numb(l), Numb(r)) then Numb(l * r)
    else v
}
//│ mixin EvalExpr() {
//│   super: {eval: ('a, Var) -> 'b}
//│   this: {eval: ('a, 'c) -> Object}
//│   fun eval: ('a, 'b & (Add['c] | Mul['c] | Numb | Var)) -> (Numb | 'b)
//│ }

module Test2 extends EvalVar, EvalExpr
//│ module Test2 {
//│   fun eval: forall 'a. (Cons[{0: anything, 1: Object & 'b}] | Nil, 'a & (Add['c] | Mul['c] | Numb | Var)) -> (Numb | Var | 'b | 'c | 'a)
//│ }
//│ where
//│   'c <: Add['c] | Mul['c] | Numb | Var

Test2.eval(Nil, Var("a"))
//│ Numb | Var
//│ res
//│     = Var {}

Test2.eval(Cons(["c", Abs("d", Var("d"))], Nil), Var("a"))
//│ Abs[Var] | Numb | Var
//│ res
//│     = Var {}

Test2.eval(Cons(["a", Numb(1)], Nil), Var("a"))
//│ Numb | Var
//│ res
//│     = Numb {}

// * This expected error shows that Test2 does not handle Abs expression inputs
:e
Test2.eval(Cons(["c", Abs("d", Var("d"))], Nil), Abs("a", Var("a")))
//│ ╔══[ERROR] Type mismatch in application:
//│ ║  l.846: 	Test2.eval(Cons(["c", Abs("d", Var("d"))], Nil), Abs("a", Var("a")))
//│ ║         	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── application of type `Abs[?A]` does not match type `Add[?A0] | Mul[?A1] | Numb | Var`
//│ ║  l.846: 	Test2.eval(Cons(["c", Abs("d", Var("d"))], Nil), Abs("a", Var("a")))
//│ ║         	                                                 ^^^^^^^^^^^^^^^^^^
//│ ╟── Note: constraint arises from reference:
//│ ║  l.799: 	  if v is
//│ ║         	     ^
//│ ╟── from reference:
//│ ║  l.809: 	    let vv = map_expr(eta, v)
//│ ╙──       	                           ^
//│ Abs[Var] | Numb | Var | error
//│ res
//│ Runtime error:
//│   Error: non-exhaustive case expression

Test2.eval(Cons(["a", Abs("d", Var("d"))], Nil), Add(Numb(1), Var("a")))
//│ Abs[Var] | Add[Numb | Var] | Numb | Var
//│ res
//│     = Add {}

module Test3 extends EvalVar, EvalExpr, EvalLambda
//│ module Test3 {
//│   fun eval: (Cons[{0: anything, 1: 'a}] | Nil, 'b) -> 'c
//│ }
//│ where
//│   'a :> 'c
//│      <: Object
//│   'c :> 'a | 'd | Abs['c] | App['c]
//│   'd <: Add['b] | Mul['b] | Numb | Var
//│   'b <: Abs['b] | App['b & (Abs['b] | Object & ~#Abs)] | Object & 'd & ~#Abs & ~#App

Test3.eval(Cons(["c", Abs("d", Var("d"))], Nil), Abs("a", Var("a")))
//│ 'a
//│   where
//│     'a :> Abs[Var] | Numb | Var | Abs['a] | App['a]
//│ res
//│     = Abs {}

Test3.eval(Cons(["c", Abs("d", Var("d"))], Nil), App(Abs("a", Var("a")), Add(Numb(1), Var("c"))))
//│ 'a
//│   where
//│     'a :> Abs[Var] | Add[Numb | Var] | Numb | Var | Abs['a] | App['a]
//│ res
//│     = Add {}

// * Incorrect version, for regression testing – EvalLambda should be mixed in after EvalExpr
module Test3 extends EvalVar, EvalLambda, EvalExpr
//│ module Test3 {
//│   fun eval: (Cons[{0: anything, 1: 'a}] | Nil, 'a & (Add['b] | Mul['b] | Numb | Var)) -> (Numb | 'c | 'a | 'b)
//│ }
//│ where
//│   'a :> 'b | 'c
//│      <: Object
//│   'c :> Abs['c | 'a] | App['c | 'a] | 'a
//│   'b <: Add['b] | Mul['b] | Numb | Var

// * Because EvalExpr does not dispatch lambdas to super and map_expr only
// * handles exprs
:e
Test3.eval(Cons(["c", Abs("d", Var("d"))], Nil), Abs("a", Var("a")))
//│ ╔══[ERROR] Type mismatch in application:
//│ ║  l.908: 	Test3.eval(Cons(["c", Abs("d", Var("d"))], Nil), Abs("a", Var("a")))
//│ ║         	^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//│ ╟── application of type `Abs[?A]` does not match type `Add[?A0] | Mul[?A1] | Numb | Var`
//│ ║  l.908: 	Test3.eval(Cons(["c", Abs("d", Var("d"))], Nil), Abs("a", Var("a")))
//│ ║         	                                                 ^^^^^^^^^^^^^^^^^^
//│ ╟── Note: constraint arises from reference:
//│ ║  l.799: 	  if v is
//│ ║         	     ^
//│ ╟── from reference:
//│ ║  l.809: 	    let vv = map_expr(eta, v)
//│ ╙──       	                           ^
//│ Abs[Var] | error | 'a
//│   where
//│     'a :> Abs['a] | App['a] | Numb | Var
//│ res
//│ Runtime error:
//│   Error: non-exhaustive case expression

